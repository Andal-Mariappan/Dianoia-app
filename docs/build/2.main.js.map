{"version":3,"sources":["../../src/pages/activity-categories/activity-categories.module.ts","webpack:///./src/components/buttons-list/buttons-list.module.ts?24e2","webpack:///./src/components/buttons-list/buttons-list.ts?816b","../../src/pages/activity-categories/activity-categories.ts"],"names":[],"mappings":"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","file":"2.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ActivityCategoriesPage } from './activity-categories';\nimport {ButtonsListComponentModule} from \"../../components/buttons-list/buttons-list.module\";\n\n\n@NgModule({\n  declarations: [\n    ActivityCategoriesPage\n  ],\n  imports: [\n    IonicPageModule.forChild(ActivityCategoriesPage),\n    ButtonsListComponentModule\n  ],\n  exports: [\n    ActivityCategoriesPage\n  ]\n})\nexport class TopActivityCategoriesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activity-categories/activity-categories.module.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ButtonsListComponent } from './buttons-list';\n\n@NgModule({\n  declarations: [\n    ButtonsListComponent,\n  ],\n  imports: [\n    IonicPageModule.forChild(ButtonsListComponent),\n  ],\n  exports: [\n    ButtonsListComponent\n  ]\n})\nexport class ButtonsListComponentModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/buttons-list/buttons-list.module.ts","import {Component, EventEmitter, Input, Output} from '@angular/core';\n\n/**\n * Generated class for the ButtonsListComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'buttons-list',\n  templateUrl: 'buttons-list.html'\n})\nexport class ButtonsListComponent {\n\n  @Input('buttons') buttons: [any];\n  @Output() buttonClick = new EventEmitter();\n\n  constructor() {\n  }\n\n  onButtonClick(button) {\n    this.buttonClick.emit(button)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/buttons-list/buttons-list.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport {ActivityCategoryProvider} from \"../../providers/activity-category/activity-category\";\nimport {ActivityProvider} from \"../../providers/activity/activity\";\nimport {DifficultyLevelProvider} from \"../../providers/difficulty-level/difficulty-level\";\nimport {Observable} from \"rxjs/Observable\";\n\n@IonicPage()\n@Component({\n  selector: 'page-activity-categories',\n  templateUrl: 'activity-categories.html',\n})\nexport class ActivityCategoriesPage {\n  categories: any;\n  tests: any[];\n  parentCategoryId: string;\n  parentCategory: any;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n              private activityCategoryProvider: ActivityCategoryProvider,\n              private activityProvider: ActivityProvider,\n              private difficultyLevelProvider: DifficultyLevelProvider) {\n    this.categories = this.navParams.get(\"categories\");\n    // if no categories passed as parameter, load top-level categories by default\n    if(this.categories == null) {\n      this.activityCategoryProvider.getTopLevelCategories().then(categories => {\n        this.categories = categories;\n      });\n    } else {\n      this.parentCategoryId = this.navParams.get(\"parentCategoryId\");\n      this.activityCategoryProvider.getCategoryById(this.parentCategoryId).subscribe(category => {\n        this.parentCategory = category;\n      });\n    }\n  }\n\n  getPageTitle() {\n    return this.parentCategory != null ?  this.parentCategory.title : \"Κατηγορίες δραστηριοτήτων\";\n  }\n\n\n  selectCategory(categoryButton: any):any {\n    // if the selected category has subcategories, get the subcategories and load the page again\n    this.activityCategoryProvider.getRelationshipsForCategory(categoryButton.category_id).subscribe(categoryRelationships => {\n      if(categoryRelationships.subcategories.length > 0) {\n        this.getSubcategoriesAndLoadPage(categoryButton.category_id);\n      }\n      // else, if the selected has activities, get the activities and load the activities page\n      else if(categoryRelationships.activities.length > 0) {\n        this.getDifficultyLevelsForCategoryAndLoadPage(categoryButton.category_id);\n      }\n    });\n  }\n\n  getDifficultyLevelsForCategoryAndLoadPage(categoryId: string):any {\n    this.activityCategoryProvider.getActivitiesForCategory(categoryId).subscribe(activitiesIds => {\n      if(activitiesIds != null) {\n        this.activityProvider.getActivitiesByIds(activitiesIds).subscribe(activities => {\n          this.tests = activities;\n          setTimeout(() => { // <===\n            this.getDifficultyLevelsForActivitiesAndLoadPage(activities, categoryId);\n          }, 10);\n        });\n      }\n    });\n  }\n\n  getDifficultyLevelsForActivitiesAndLoadPage(activities: Observable<any>, categoryId) {\n    this.difficultyLevelProvider.getDifficultyLevelsForActivities(activities).subscribe(difficultyLevels => {\n      console.log(\"difficultyLevels\", difficultyLevels);\n      this.navCtrl.push(\"DifficultyLevelsPage\", {levels: difficultyLevels, categoryId: categoryId, activities: activities});\n    });\n  }\n\n  getActivitiesAndLoadPage(categoryId: string):any {\n    this.activityCategoryProvider.getActivitiesForCategory(categoryId).subscribe(activitiesIds => {\n      if(activitiesIds != null) {\n        this.activityProvider.getActivitiesByIds(activitiesIds).subscribe(activities => {\n        });\n      }\n    });\n  }\n\n  private getSubcategoriesAndLoadPage(categoryId: string):any {\n    this.activityCategoryProvider.getSubcategoriesForCategory(categoryId).subscribe(subcategoriesIds => {\n      if(subcategoriesIds != null) {\n        this.activityCategoryProvider.getCategoriesByIds(subcategoriesIds).subscribe(subcategories => {\n          this.navCtrl.push(\"ActivityCategoriesPage\", {categories: subcategories, parentCategoryId: categoryId})\n        });\n      }\n    });\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activity-categories/activity-categories.ts"],"sourceRoot":""}